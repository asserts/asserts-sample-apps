apiVersion: asserts/v1
kind: SLO
name: map-service-availability
indicator:
  kind: Request
  badEventCount: asserts:error:total{job="map", asserts_error_type="server_errors"}
  totalEventCount: asserts:request:total{job="map"}
entitySearch: "map services"
objectives:
  - ratio: 0.99
    name: "Daily Availability"
    window:
      kind: Rolling
      days: 1
---
apiVersion: asserts/v1
kind: SLO
name: map-service-availability-weekly
indicator:
  kind: Request
  badEventCount: asserts:error:total{job="map", asserts_error_type="server_errors"}
  totalEventCount: asserts:request:total{job="map"}
entitySearch: "map services"
objectives:
  - ratio: 0.99
    name: "Weekly Availability"
    window:
      kind: Rolling
      days: 7
---
apiVersion: asserts/v1
kind: SLO
name: map-service-latency
indicator:
  kind: Occurrence
  measurement: asserts:latency:p99{job="map"}
entitySearch: "map services"
objectives:
  - value: 2
    ratio: 0.99
    name: "Tolerable"
    window:
      kind: Rolling
      days: 30
---
apiVersion: asserts/v1
kind: SLO
name: map-service-max-traffic
indicator:
  kind: Occurrence
  measurement: sum(rate(asserts:request:total{job="map"}[1m]))
entitySearch: "map services"
objectives:
  - value: 10
    ratio: 0.99
    name: "Max traffic"
    window:
      kind: Rolling
      days: 30

